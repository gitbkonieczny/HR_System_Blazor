#pragma checksum "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\Pages\Users.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "912295a08dd3883c3358c36dd8cd91d082566ec0"
// <auto-generated/>
#pragma warning disable 1591
#pragma warning disable 0414
#pragma warning disable 0649
#pragma warning disable 0169

namespace HUDEwiBlazor.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using Microsoft.AspNetCore.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using HUDEwiBlazor;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using HUDEwiBlazor.Components;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using HUDEwiBlazor.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using HUDEwiBlazor.Data.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using HUDEwiBlazor.Classes;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using HUDEwiBlazor.Interfaces;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using Microsoft.AspNetCore.ProtectedBrowserStorage;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using Syncfusion.Blazor.Calendars;

#line default
#line hidden
#nullable disable
#nullable restore
#line 17 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using Syncfusion.Blazor;

#line default
#line hidden
#nullable disable
#nullable restore
#line 18 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using Microsoft.AspNetCore.Localization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 19 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using Microsoft.Extensions.Localization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 20 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using HUDEwiBlazor.Resources;

#line default
#line hidden
#nullable disable
#nullable restore
#line 21 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using Syncfusion.Blazor.Navigations;

#line default
#line hidden
#nullable disable
#nullable restore
#line 22 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using Syncfusion.Blazor.Grids;

#line default
#line hidden
#nullable disable
#nullable restore
#line 23 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using Syncfusion.Blazor.DropDowns;

#line default
#line hidden
#nullable disable
#nullable restore
#line 24 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using Syncfusion.Blazor.Inputs;

#line default
#line hidden
#nullable disable
#nullable restore
#line 25 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using Syncfusion.Blazor.Popups;

#line default
#line hidden
#nullable disable
#nullable restore
#line 26 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using Syncfusion.Blazor.QueryBuilder;

#line default
#line hidden
#nullable disable
#nullable restore
#line 27 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using Syncfusion.Blazor.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 28 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using AutoMapper;

#line default
#line hidden
#nullable disable
#nullable restore
#line 29 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using Classes.Mapped;

#line default
#line hidden
#nullable disable
#nullable restore
#line 30 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using Syncfusion.Blazor.Buttons;

#line default
#line hidden
#nullable disable
#nullable restore
#line 31 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using Syncfusion.Blazor.Notifications;

#line default
#line hidden
#nullable disable
#nullable restore
#line 32 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using HUDEwiBlazor.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 33 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using System.Collections.ObjectModel;

#line default
#line hidden
#nullable disable
#nullable restore
#line 34 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using Microsoft.AspNetCore.Components.Rendering;

#line default
#line hidden
#nullable disable
#nullable restore
#line 35 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\_Imports.razor"
using System.IO;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.LayoutAttribute(typeof(SiteLayout))]
    [Microsoft.AspNetCore.Components.RouteAttribute("/users")]
    public partial class Users : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
        }
        #pragma warning restore 1998
#nullable restore
#line 124 "C:\Users\BKC\source\repos\ewiblazorserver\HUDEwiBlazor\Pages\Users.razor"
      
    protected SfToast ToastObj;
    public SfDropDownList<string,string> CountryState;
    protected Syncfusion.Blazor.Grids.GridEditSettings TemplateRef;
    protected SfGrid<MappedEmployee> Grid;
    protected List<Gender> _genders;
    protected List<string> _country;
    protected List<string> _countrystate = new List<string>();
    protected List<MappedRoles> _roles;


    Type roles_models = typeof(MappedRoles);

    private SfMultiSelect<int[]> RolesSelect;

    private Boolean Check = false;
    private DialogSettings DialogParams = new DialogSettings { MinHeight = "400px", Width = "450px" };
    private string Title;
    protected List<MappedEmployee> _users = new List<MappedEmployee>();

    private Boolean torefresh = false;
    IDictionary<string, object> message;
    protected override async Task OnInitializedAsync()
    {
        message = new Dictionary<string, object>() { { "required", Localizer.GetText("QueryBuilder_ValidationMessage") }, { "email", Localizer.GetText("EmailValid") } };
        _genders = Security.GetAllGenders();
        _users = _mapper.Map<List<MappedEmployee>>(await Security.GetAllUsers());
        _country = await HolidayApi.GetCountryList();
        _roles = _mapper.Map<List<MappedRoles>>(await Security.GetRolesAsync());
    }

    protected async Task ActionCompleteHandler(ActionEventArgs<MappedEmployee> args)
    {
        if (args.RequestType.ToString() == "Add")
        {
            Title = Localizer.GetText("New_record");
            args.Data.BirthDate = DateTime.Now;
            args.Data.Gender = 0;
            args.Data.HolidayCountry = "PL";
            _countrystate = await HolidayApi.GetCountryStateListAsync(args.Data.HolidayCountry);
            args.Data.HolidayCountryState = _countrystate.First();

        }
        if (args.RequestType.ToString() == "BeginEdit")
        {
            Title = Localizer.GetText("Edit_record") + " " + args.Data.EmployeeID.ToString();
            _countrystate = await HolidayApi.GetCountryStateListAsync(args.Data.HolidayCountry);
        }

        if (args.Action == "Add")
        {
            if (args.RequestType.ToString() == "Save")
            {
                var response = await Security.AddEmployee(_mapper.Map<Employee>(args.Data));

                if (response.Item1 != "OK")
                {
                    ToastObj.Title = Localizer.GetText(response.Item1) + " " + response.Item2;
                    ToastObj.Show();
                    torefresh = true;
                    Grid.Refresh();
                    StateHasChanged();
                    return;
                }
                else
                {

                    ToastObj.Title = Localizer.GetText("OperationSuccess");
                    ToastObj.Show();
                }
            }
        }

        if (args.Action == "Edit")
        {
            if (args.RequestType.ToString() == "Save")
            {
                var response = await Security.UpdateEmployee(_mapper.Map<Employee>(args.Data));
                if (response.Item1 != "OK")
                {
                    ToastObj.Title = Localizer.GetText(response.Item1) + " " + response.Item2;
                    ToastObj.Show();
                    torefresh = true;
                    Grid.Refresh();
                    StateHasChanged();
                    return;
                }
                else
                {

                    ToastObj.Title = Localizer.GetText("OperationSuccess");
                    ToastObj.Show();
                }

            }
        }

        if (args.RequestType.ToString() == "Delete")
        {

            var response = await Security.DeleteEmployee(_mapper.Map<Employee>(args.Data));
            if (response.Item1 != "OK")
            {
                ToastObj.Title = Localizer.GetText(response.Item1) + " " + response.Item2;
                ToastObj.Show();
                torefresh = true;
                Grid.Refresh();
                StateHasChanged();
                return;
            }
            else
            {
                ToastObj.Title = Localizer.GetText("OperationSuccess");
                ToastObj.Show();
            }

        }
        if (args.RequestType.ToString() == "Refresh" && torefresh==true)
        {
            torefresh = false;
            _users = _mapper.Map<List<MappedEmployee>>(await Security.GetAllUsers());
        }
        StateHasChanged();
    }







#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IMapper _mapper { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IHolidayApiService HolidayApi { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private ISecurity Security { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private ISyncfusionStringLocalizer Localizer { get; set; }
    }
}
#pragma warning restore 1591
